---
layout: post
title: "[译]操作系統如何工作:作为开发者你应该知道的10个概念（翻译进行中）"
subtitle: "How Operating Systems Work: 10 Concepts you Should Know as a Developer"
date: 2018-01-25
author: HouXingYi
category: 翻译
tags: 操作系统
finished: true
---

原文链接:[How Operating Systems Work: 10 Concepts you Should Know as a Developer](https://codeburst.io/how-operating-systems-work-10-concepts-you-should-know-as-a-developer-8d63bb38331f)

你会说二进制语言吗？你可以理解机器代码吗？如果我给你一张写满了1和0的纸，你可以告诉我是什么意思/用来做什么的吗？如果你到一个完全陌生的国家，那个国家说一种你完全没有听过或者你听过但却一点也不会说的语言，在那种情况下，你需要什么来帮助你和当地人交流？

你需要一个翻译。你电脑里的操作系统就像翻译那样工作。它把那些1和0，yes和no，on和off转换为你可以理解的语言。它在一个流式的图形用户界面（GUI）中做这些事，在GUI中，你可以移动你的鼠标，点击，移动，在你的眼前做各种事情。

虽然知识的深度和广度有待讨论，多了解除了基础知识以外的知识对你的程序的运行甚至程序的结构和流动都有深远的影响。

为什么呢？当你写了一个程序，这个程序运行的很慢，但你找不出你的代码的问题，你该如何解决？如果你不懂得操作系统如何工作，你该如何去debug你的程序？是不是访问了太多的文件？用光了内存并且交换高负荷？但是你连交换是什么都不知道！或者是I/O阻塞了？

你想要和另外一个机器交流。你要如何在本地做到，或者通过网络做到？有什么区别？为什么有些开发者喜欢一种OS而不是另一种？

在成为一个严肃的开发者的路上，我最近学习了乔治亚大学的课程[Introduction to Operating Systems](https://cn.udacity.com/course/introduction-to-operating-systems--ud923)。这个课程教授基础的操作系统概念原理和实现。课程的核心包括了并发编程（线程和同步），进程间通信和分布式OS介绍。

我想在这篇博客中分享我在这个课程中的总结，那就是`10个重要的操作系统概念`，如果你想在软件开发上进步，你需要学习他们。

## 什么是操作系统

首先，我们要定义一下操作系统。操作系统是管理计算机硬件并且提供编程服务的软件集合。具体来说，它隐藏硬件的复杂性，管理计算资源，并且提供隔离和保护。最重要的是，它有访问底层硬件的特权。

操作系统的主要组成部分有文件系统，调度程序和驱动程序。你应该都有使用过桌面（windows，Mac，Linux）和嵌入式（Android，iOS）操作系统。

操作系统有三个关键的元素，分别是
1. `抽象`（进程，线程，文件，通信，内存）
2. `机制`（创建，计划表，打开，写，分配）
3. `策略`（LRU，EDF）

操作系统的设计有两个原则
1. `机制和策略的分离`：通过执行灵活的机制来支持策略
2. `最优化常见情景`：OS会在什么地方被使用？用户会在机器上执行什么？工作量如何？

现在常用的操作系统有三种类型。第一种是`单片机系统`，整个操作系统在一个内核空间中工作并且只有一种管理模式。第二种是`模块化操作系统`，操作系统核心的一部分位于独立的被称作模块的文件中，在系统运行时加入。第三种是`微操作系统`，核心被分成独立的进程，著名的有服务器。一些服务器运行在内核空间，另一些运行在用户空间。

现在，我们来更加深入了解一些你需要知道的概念

## 1：进程和进程管理

一个进程基本上就是一个执行的程序。进程的执行必需按顺序进行。简单来说，我们写了一个文本文件的电脑程序，当我们执行这个程序，它变成了一个进程执行我们程序中所有的任务。

当一个程序加载进内存成为一个进程，它会变成四个部分-堆，栈，文本和数据。下面的图片展现了一个内存中的进程简化的结构。

![pic](https://cdn-images-1.medium.com/max/1600/1*pplsGMeRKFcc0IHr1j3YwA.jpeg)

* `堆`：进程堆包括了临时数据，比如方法的参数，返回值和本地变量。
* `栈`：在进程运行的时候动态的分配内存
* `text`This includes the current activity represented by the value of Program Counter and the contents of the processor’s registers.
* `Data`：这个部分包括全局和静态的变量

当一个进程运行的时候，它在不同的阶段变化。这些阶段可能根据不同的操作系统有所不同，命名的方式也没有标准。总体来说，一个进程在某个时刻会是下面五个进程中的某一个：

![pic](https://cdn-images-1.medium.com/max/1600/1*KTbvb5KA501gYqsfv39k6Q.jpeg)

* `start`：当一个进程第一次创建的最初状态
* `Ready`：进程等待被分配给一个处理器。准备好的进程等待操作系统分配处理器给他们，这样他们才可以运行。一个进程有可能在start状态之后进入这个状态，或者是正在运行中，但被打断，因为调度程序把CPU分配给其他程序。
* `Running`：一旦进程被OS调度器分配给一个处理器，进程的状态设为running并且处理器执行它的指令。
* `Waiting`：当进程需要等待一个资源，比如等待用户输入，或者等待文件可访问，这时候进程进入waiting状态。
* `Terminated or Exit`：一旦进程完成执行，或者被操作系统终止，进程转入terminated状态，这个状态进程等待被从主内存中移除。

一个`进程控制块（Process Control Block）`是一个由操作系统为每个进程维护的数据结构。PCB由一个整型的进程ID（PID）标识。PCB



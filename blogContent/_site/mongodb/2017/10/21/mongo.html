<!DOCTYPE html>
<html>
  <head>
      
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://houxingyi.github.io//mongodb/2017/10/21/mongo.html">
  <link rel="alternate" type="application/rss+xml" title="侯星伊的个人博客" href="https://houxingyi.github.io//feed.xml">

<!-- Google font -->

  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto Sans">

<!-- font awesome -->

<link rel="stylesheet" href="/css/font-awesome/css/font-awesome.min.css">

</head>


  

  

  </head>

  <body>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>mongoDB常用操作</title>
  <meta name="description" content="一些mongoDB常用的操作">
</head>


  <div class="wrapper">
          <header class="post-header">

    <center><div class="post-title" itemprop="name headline">mongoDB常用操作</div>

		<div class="post-meta"><i class="fa fa-calendar-o"></i> <time datetime="21 Oct 2017" itemprop="datePublished">Oct 21 2017</time>

		&nbsp;&nbsp;•&nbsp;&nbsp;<i class="fa fa-user-secret"></i> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">HouXingYi</span>
        
		<br>
		<!--<i class="fa fa-eye"></i> <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-pulse"></i></span>˚C</span>-->
	</div>

        
        <div class="post-tags">
        
		<a class="post-tags-item" href="https://houxingyi.github.io//tags/">mongo</a>
        
	</div>
    </center>
    
</header>

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<div class="post-content">
    <center>
	
	<p></p>
	
    </center>
	<h2>Directory</h2>
</div>

<div id="category"></div>

<div class="post-content" itemprop="articleBody">
    <p>一些mongoDB常用的操作</p>

<h2 id="基本概念">基本概念</h2>

<p>mongoDB中的一些基本概念与SQL的基本概念是不同的，这是我们学习mongoDB的时候需要注意与区分的。 <br /></p>

<p>下面一个表格带我们来理解下mongoDB中的一些概念。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">SQL概念</th>
      <th style="text-align: left">mongoDB概念</th>
      <th style="text-align: left">说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">database</td>
      <td style="text-align: left">database</td>
      <td style="text-align: left">数据库</td>
    </tr>
    <tr>
      <td style="text-align: left">table</td>
      <td style="text-align: left">collection</td>
      <td style="text-align: left">数据库表/集合</td>
    </tr>
    <tr>
      <td style="text-align: left">row</td>
      <td style="text-align: left">document</td>
      <td style="text-align: left">数据记录行/文档</td>
    </tr>
    <tr>
      <td style="text-align: left">column</td>
      <td style="text-align: left">field</td>
      <td style="text-align: left">数据字段/域</td>
    </tr>
    <tr>
      <td style="text-align: left">index</td>
      <td style="text-align: left">index</td>
      <td style="text-align: left">索引</td>
    </tr>
    <tr>
      <td style="text-align: left">table joins</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">表连接，mongoDB不支持</td>
    </tr>
    <tr>
      <td style="text-align: left">primary key</td>
      <td style="text-align: left">primary key</td>
      <td style="text-align: left">主键，mongoDB自动将_id字段设置为主键</td>
    </tr>
  </tbody>
</table>

<p>通过下图，更加直观的理解mongoDB的一些概念</p>

<p><img src="./show.png" alt="展示" /></p>

<h3 id="数据库">数据库</h3>

<p>一个mongoDB可以建立多个数据库</p>

<p>通过命令show dbs来展现当前有多少数据库，名字分别叫什么</p>

<h3 id="文档document">文档（document）</h3>

<p>在mongoDB中文档就是一组键值对(key-value)。MongoDB 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 MongoDB 非常突出的特点。</p>

<p>需要注意的点</p>

<ol>
  <li>文档中的键/值对是有序的。</li>
  <li>文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚至可以是整个嵌入的文档)。</li>
  <li>MongoDB区分类型和大小写。</li>
  <li>MongoDB的文档不能有重复的键。</li>
  <li>文档的键是字符串。除了少数例外情况，键可以使用任意UTF-8字符。</li>
</ol>

<h3 id="集合collection">集合（collection）</h3>

<p>集合就是mongoDB文档组，类似关系型数据库中的表。一个数据库中有多个集合，可以用命令show collections来查看。集合没有固定的结构，这意味着你在对集合可以插入不同格式和类型的数据，但通常情况下我们插入集合的数据都会有一定的关联性。</p>

<h3 id="mongodb-数据类型">MongoDB 数据类型</h3>

<p>下表为MongoDB中常用的几种数据类型。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">SQL概念</th>
      <th style="text-align: left">mongoDB概念</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">String</td>
      <td style="text-align: left">字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。</td>
    </tr>
    <tr>
      <td style="text-align: left">Integer</td>
      <td style="text-align: left">整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。</td>
    </tr>
    <tr>
      <td style="text-align: left">Boolean</td>
      <td style="text-align: left">布尔值。用于存储布尔值（真/假）。</td>
    </tr>
    <tr>
      <td style="text-align: left">Double</td>
      <td style="text-align: left">双精度浮点值。用于存储浮点值。</td>
    </tr>
    <tr>
      <td style="text-align: left">Min/Max keys</td>
      <td style="text-align: left">将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。</td>
    </tr>
    <tr>
      <td style="text-align: left">Array</td>
      <td style="text-align: left">用于将数组或列表或多个值存储为一个键。</td>
    </tr>
    <tr>
      <td style="text-align: left">Timestamp</td>
      <td style="text-align: left">时间戳。记录文档修改或添加的具体时间。</td>
    </tr>
    <tr>
      <td style="text-align: left">Object</td>
      <td style="text-align: left">用于内嵌文档。</td>
    </tr>
    <tr>
      <td style="text-align: left">Null</td>
      <td style="text-align: left">用于创建空值。</td>
    </tr>
    <tr>
      <td style="text-align: left">Symbol</td>
      <td style="text-align: left">符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。</td>
    </tr>
    <tr>
      <td style="text-align: left">Date</td>
      <td style="text-align: left">日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。</td>
    </tr>
    <tr>
      <td style="text-align: left">Object ID</td>
      <td style="text-align: left">对象 ID。用于创建文档的 ID。</td>
    </tr>
    <tr>
      <td style="text-align: left">Binary Data</td>
      <td style="text-align: left">二进制数据。用于存储二进制数据。</td>
    </tr>
    <tr>
      <td style="text-align: left">Code</td>
      <td style="text-align: left">代码类型。用于在文档中存储 JavaScript 代码。</td>
    </tr>
    <tr>
      <td style="text-align: left">Regular expression</td>
      <td style="text-align: left">正则表达式类型。用于存储正则表达式。</td>
    </tr>
  </tbody>
</table>

<h2 id="创建数据库">创建数据库</h2>

<p>直接使用use命令创建数据库。如果数据库不存在，则创建数据库，否则切换到指定数据库。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>use DATABASE_NAME
</code></pre>
</div>

<p>使用show dbs展示当前已创建的数据库。</p>

<p>use数据库之后db命令表示当前数据库</p>

<h2 id="删除数据库">删除数据库</h2>

<p>使用下列命令删除数据库</p>
<div class="highlighter-rouge"><pre class="highlight"><code>db.dropDatabase()
</code></pre>
</div>
<p>使用下列命令删除集合</p>
<div class="highlighter-rouge"><pre class="highlight"><code>db.collection.drop()
</code></pre>
</div>

<h2 id="插入数据">插入数据</h2>

<p>MongoDB 使用 insert() 或 save() 方法向集合中插入文档，语法如下：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>db.COLLECTION_NAME.insert(document)
</code></pre>
</div>
<p>document采用json语法</p>

<p>3.2 版本后还有以下几种语法可用于插入文档:</p>

<ul>
  <li>db.collection.insertOne():向指定集合中插入一条文档数据</li>
  <li>db.collection.insertMany():向指定集合中插入多条文档数据</li>
</ul>

<h2 id="更新文档">更新文档</h2>

<p>update() 方法用于更新已存在的文档。语法格式如下：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>db.collection.update(
   &lt;query&gt;,
   &lt;update&gt;,
   {
     upsert: &lt;boolean&gt;,
     multi: &lt;boolean&gt;,
     writeConcern: &lt;document&gt;
   }
)
</code></pre>
</div>
<p>参数说明：</p>
<ul>
  <li>query : update的查询条件，类似sql update查询内where后面的。</li>
  <li>update : update的对象和一些更新的操作符（如$,$inc…）等，也可以理解为sql update查询内set后面的</li>
  <li>upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。</li>
  <li>multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。</li>
  <li>writeConcern :可选，抛出异常的级别。</li>
</ul>

<h2 id="删除文档">删除文档</h2>

<p>remove() 方法的基本语法格式如下所示：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>db.collection.remove(
   &lt;query&gt;,
   &lt;justOne&gt;
)
</code></pre>
</div>

<p>如果你的 MongoDB 是 2.6 版本以后的，语法格式如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>db.collection.remove(
   &lt;query&gt;,
   {
     justOne: &lt;boolean&gt;,
     writeConcern: &lt;document&gt;
   }
)
</code></pre>
</div>

<p>参数说明：</p>
<ul>
  <li>query :（可选）删除的文档的条件。</li>
  <li>justOne : （可选）如果设为 true 或 1，则只删除一个文档。</li>
  <li>writeConcern :（可选）抛出异常的级别。</li>
</ul>

<p>另：</p>

<p>remove() 方法已经过时了，现在官方推荐使用 deleteOne() 和 deleteMany() 方法。</p>

<h2 id="查询文档">查询文档</h2>

<p>MongoDB 查询数据的语法格式如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>db.collection.find(query, projection)
</code></pre>
</div>

<ul>
  <li>query ：可选，使用查询操作符指定查询条件</li>
  <li>projection ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）。</li>
</ul>

<p>如果你需要以易读的方式来读取数据，可以使用 pretty() 方法，语法格式如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&gt;db.col.find().pretty()
</code></pre>
</div>

<p>pretty() 方法以格式化的方式来显示所有文档。</p>

<h2 id="总结">总结</h2>

<p>以上是一些最基本的mongoDB的常用操作，若想看一些详情的文档和功能可以看官方的文档和一些教程。</p>

<p><strong>参考</strong></p>

<p><a href="https://docs.mongodb.com/?_ga=2.76410965.1778730410.1511524353-1232494664.1511524353">mongoDB官方文档</a></p>

<p><a href="http://www.runoob.com/mongodb/mongodb-tutorial.html">mongoDB教程</a></p>


</div>

<div>
	
	<div class="eof"></div>
	
</div>

<!--先不分享-->
<!-- <div class="share">
    <p>Share this post with: </p>
	<a href="https://twitter.com/intent/tweet?text=mongoDB常用操作@&amp;url=https://houxingyi.github.io//mongodb/2017/10/21/mongo.html" class="twitter-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
		</span>
	</a>
    
	<a href="https://www.facebook.com/sharer/sharer.php?u=https://houxingyi.github.io//mongodb/2017/10/21/mongo.html" class="facebook-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
		</span>
	</a>
    
	<a href="https://plus.google.com/share?url=https://houxingyi.github.io//mongodb/2017/10/21/mongo.html" class="googleplus-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
		</span>
	</a>
</div>
 -->

<!-- <div id="disqus_thread"></div>


 
</div>
  -->


<div id="container"></div>
<link rel="stylesheet" href="/gitment/default.css">
<script src="/gitment/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id:window.location.pathname,
  owner: 'HouXingYi',
  repo: 'HouXingYi.github.io',
  oauth: {
    client_id: 'd8225497d80663e0c270',
    client_secret: '748c7dd30b4c86dd92fe7176d4a60e5d44ee405e',
  },
})
gitment.render('container')
</script>


</article>

  </div>

</body>

<foot>

    <footer class="site-footer">

  <div class="wrapper">

    <center>
        
		<p>
		 <a class="link" href="/index.html">index</a> /
		 <a class="link" href="/archive/">Archive</a> /
		 <a class="link" href="/category/">Category</a> / 
		 <a class="link" href="/tags/">Tags</a> / 
		 <a class="link" href="/about/">About</a> 
		<!--/-->
		<!--<a class="link" href="/contact/">Contact</a>-->
        </p>

        <span><script>document.write(new Date().getFullYear());</script></span>
        <span>&copy;</span>
        
		<a class="link" href="">HouXingYi</a>
		<br>
		<span>Theme &copy; <a class="link" href="https://twitter.com/itisbenjamin1" target="_blank"> Ben</a> | </span>
				<iframe
			style="margin-left: 2px; margin-bottom:-5px;"
			frameborder="0" scrolling="0" width="91px" height="20px"
			src="https://ghbtns.com/github-btn.html?user=itisbenjamin&repo=Nice_Blog&type=star&count=true" >
		</iframe>
		<br>
		<span>一共被点击<span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-pulse"></i></span>次</span>
		<span>一共访问人数<span id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-pulse"></i></span>次</span>
    </center>
    
  </div>

</footer>

    <foot>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Derictory -->

<!-- Hit analytics -->

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- Directory -->

<script src="/js/jquery-1.7.2.min.js"></script>
<script src="/js/highlight.min.js"></script>
<script src="/js/main.js"></script>

</foot>


</foot>

</html>
